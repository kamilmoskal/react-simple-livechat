(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{251:function(e,t,a){e.exports=a(493)},409:function(e,t,a){},493:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(245),s=a.n(r),c=a(15),l=a(16),i=a(20),m=a(17),d=a(19),p=a(495),u=a(497),h=a(496),g=a(18),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={tempName:"",tempId:""},a.onChange=function(e){a.setState({tempName:e.target.value})},a.logInAnonymous=function(e){if(e.preventDefault(),a.state.tempName.length>0){var t=10*Math.random();a.setState({tempId:t},function(){this.props.logIn(),this.props.saveTempNameAndId(this.state)})}else a.props.noNameError()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.auth;return e.Logged&&this.props.history.push("./home"),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"card col-sm-12 col-md-6 offset-md-3 col-lg-4 offset-lg-4 text-center mt-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h2",{className:"card-title"},"Welcome to LiveChat"),o.a.createElement("form",{onSubmit:this.logInAnonymous},o.a.createElement("input",{type:"text",className:"form-control-md p-2 mb-3 mx-auto",placeholder:"Nickname","aria-label":"Username","aria-describedby":"basic-addon1",style:{display:"block",width:"100%"},onChange:this.onChange}),e.nnError?o.a.createElement("p",{className:"text-danger"},"You must write temporary name"):null,o.a.createElement("button",{type:"button",className:"btn btn-dark",style:{width:"100%"},onClick:this.logInAnonymous},"Enter to chat")))))}}]),t}(n.Component),b=Object(g.b)(function(e){return{auth:e.auth}},function(e){return{logIn:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signInAnonymously().then(function(){e({type:"LOGIN_SUCCESS"})}).catch(function(t){e({type:"LOGIN_ERROR",error:t})})})},saveTempNameAndId:function(t){e({type:"SAVE_TEMP_NAME_AND_ID",data:t})},noNameError:function(){e({type:"NO_NAME_ERROR"})}}})(f),E=a(100),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={nameRoom:"",passwordRoom:"",showInputPassword:!1},a.onChange=function(e){a.setState(Object(E.a)({},e.target.id,e.target.value))},a.addRoom=function(e){e.preventDefault(),a.state.nameRoom.length>0&&(a.props.addRoom(a.state),a.setState({nameRoom:"",passwordRoom:""}))},a.showInputPassword=function(e){e.target.checked?a.setState({showInputPassword:!0}):a.setState({showInputPassword:!1,passwordRoom:""})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chatArray,a=e.changeOpenChat,n=e.openChat;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},"Rooms:"),o.a.createElement("ul",{className:"list-group list-group-flush"},t&&t.map(function(e){return o.a.createElement("li",{style:{cursor:"pointer",background:"".concat(n===e.id?"#efef":"none")},onClick:function(){a(e.id,e.password)},className:"list-group-item",key:e.id},e.id," ",e.password.length>0?o.a.createElement("i",{className:"fas fa-lock",style:{float:"right"}}):null)}))),o.a.createElement("form",{action:"",className:"my-3",onSubmit:this.addRoom},o.a.createElement("input",{type:"text",className:"form-control-md p-2 my-1 mx-auto",placeholder:"Room name",style:{display:"block",width:"100%"},onChange:this.onChange,id:"nameRoom",value:this.state.nameRoom}),this.state.showInputPassword?o.a.createElement("input",{type:"text",className:"form-control-md p-2 my-1 mx-auto",placeholder:"Room password",style:{display:"block",width:"100%"},onChange:this.onChange,id:"passwordRoom",value:this.state.passwordRoom}):null,o.a.createElement("div",{className:"form-group form-check"},o.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"setPassword",onClick:this.showInputPassword}),o.a.createElement("label",{className:"form-check-label",htmlFor:"setPassword"},"Set Password")),o.a.createElement("button",{type:"button",className:"btn btn-dark",style:{width:"100%"},onClick:this.addRoom},"Add room")))}}]),t}(n.Component),w=Object(g.b)(null,function(e){return{addRoom:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("chat").doc("".concat(e.nameRoom)).set({messages:[],password:e.passwordRoom}).then(function(){t({type:"ROOM_SUCCESS_ADD"})}).catch(function(e){t({type:"ROOM_ERROR_ADD",error:e})})}}(t))}}})(y),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={message:"",tempName:"",tempId:"",id:"",room:"",messageEmpty:!1},a.onChange=function(e){a.setState({message:e.target.value})},a.sendMessage=function(e){if(e.preventDefault(),a.state.message.length>0&&e.target.classList.contains("active")){var t=10*Math.random();a.setState({room:a.props.openChatData.openChat,id:t},function(){this.props.sendMessage(this.state),this.setState({message:""})})}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({tempName:this.props.tempData.tempName,tempId:this.props.tempData.tempId})}},{key:"render",value:function(){var e=this.props,t=e.openChatData,a=e.password;return o.a.createElement("div",{className:"text-center mt-2"},o.a.createElement("form",{onSubmit:this.sendMessage,className:"active"},o.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control-md p-2 mb-3 mx-auto",placeholder:"Message",style:{width:"75%"},value:this.state.message}),o.a.createElement("button",{onClick:this.sendMessage,type:"button",className:"btn btn-dark \n          ".concat(t.openChatPassword===a||0===t.openChatPassword.length?"active":"disabled"),style:{width:"25%"}},"Send")),this.state.messageEmpty?o.a.createElement("p",{className:"text-danger"},"You can't send empty message"):null)}}]),t}(n.Component),v=Object(g.b)(function(e){return{password:e.chat.enteredPassword}},function(e){return{sendMessage:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var o=(0,n.getFirestore)();o.collection("chat").doc("".concat(e.room)).update({messages:o.FieldValue.arrayUnion({message:e.message,tempName:e.tempName,tempId:e.tempId,id:e.id,createdAt:new Date})}).then(function(){t({type:"MESSAGE_SUCCESS_SEND"})}).catch(function(e){t({type:"MESSAGE_ERROR_SEND",error:e})})}}(t))}}})(O),N=a(248),C=a.n(N),S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={enteredPassword:"",wrongPassword:!1},a.onChange=function(e){a.setState({enteredPassword:e.target.value})},a.enteredPassword=function(e){e.preventDefault(),a.state.enteredPassword.length>0&&(a.props.enteredPassword(a.state.enteredPassword),a.setState({enteredPassword:""}))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){var e=document.getElementById("chatscreen");e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this.props,t=e.chat,a=e.openChat,n=e.password,r=e.auth,s=t&&0===t["".concat(a)].password.length||t&&t["".concat(a)].password===n?t["".concat(a)].messages.map(function(e){return o.a.createElement("div",{className:"list-group-item px-5 ".concat(e.tempId===r.tempId?"text-right bg-light":"text-left"),key:e.id},o.a.createElement("span",{className:"text-secondary",style:{fontSize:"11px"}},C()(e.createdAt.toDate()).calendar()," - ",e.tempName," "),o.a.createElement("br",null),o.a.createElement("span",{className:"py-2",style:{borderRadius:"14px"}},e.message))}):o.a.createElement("form",{action:"",className:"text-center",onSubmit:this.enteredPassword,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",width:"100%"}},o.a.createElement("input",{type:"text",className:"form-control-md p-2 my-1 mx-auto",placeholder:"password","aria-label":"Username","aria-describedby":"basic-addon1",style:{display:"block",width:"200px"},onChange:this.onChange,value:this.state.enteredPassword}),o.a.createElement("button",{type:"button",className:"btn btn-dark mt-2",style:{width:"200px"},onClick:this.enteredPassword},"Enter password"),this.state.wrongPassword?o.a.createElement("p",{className:"text-danger"},"Wrong password"):null);return o.a.createElement("div",{className:"card",style:{height:"400px",overflow:"auto"},id:"chatscreen"},s)}}]),t}(n.Component),R=Object(g.b)(function(e){return{password:e.chat.enteredPassword,auth:e.auth}},function(e){return{enteredPassword:function(t){e({type:"ENTERED_PASSWORD",password:t})}}})(S),j=a(41),A=a(23),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={openChat:"room1",openChatPassword:""},a.changeOpenChat=function(e,t){a.setState({openChat:e,openChatPassword:t})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.auth,n=t.chat,r=t.chatArray;return a.Logged||this.props.history.push("./"),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"mt-3 col-lg-4 order-lg-1 order-sm-2 order-2"},o.a.createElement(w,{chatArray:r,changeOpenChat:this.changeOpenChat,openChat:this.state.openChat}),o.a.createElement("button",{className:"btn btn-dark",onClick:function(){e.props.logOut()},style:{width:"100%"}},"LOGOUT")),o.a.createElement("div",{className:"mt-3 col-lg-8 order-lg-2 order-sm-1 order-1"},o.a.createElement(R,{chat:n,openChat:this.state.openChat}),o.a.createElement(v,{tempData:a,openChatData:this.state}))))}}]),t}(n.Component),I=Object(A.d)(Object(g.b)(function(e){return{auth:e.auth,chat:e.firestore.data.chat,chatArray:e.firestore.ordered.chat,user:e.firebase.auth}},function(e){return{logOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().currentUser.delete().then(function(){e({type:"LOGOUT_SUCCESS"})}).catch(function(t){e({type:"LOGOUT_ERROR",error:t})})})}}}),Object(j.firestoreConnect)([{collection:"chat"}]))(k),_=(a(407),a(409),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,{basename:"/react-simple-livechat"},o.a.createElement("div",{className:"App"},o.a.createElement(u.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:b}),o.a.createElement(h.a,{path:"/home",component:I}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(42),P={Logged:!1,tempName:"",tempId:"",nnError:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_TEMP_NAME_AND_ID":return console.log("temporary named and id saved"),Object(D.a)({},e,{tempName:t.data.tempName,tempId:t.data.tempId,nnError:!1});case"LOGIN_SUCCESS":return console.log("login anonymous success"),Object(D.a)({},e,{Logged:!0});case"LOGIN_ERROR":return console.log("login error"),e;case"LOGOUT_SUCCESS":return console.log("logout success"),Object(D.a)({},e,{Logged:!1});case"LOGOUT_ERROR":return console.log("logout error"),e;case"NO_NAME_ERROR":return console.log("no name error"),Object(D.a)({},e,{nnError:!0});default:return e}},M={enteredPassword:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE_SUCCESS_SEND":return console.log("message send"),e;case"MESSAGE_ERROR_SEND":return console.log("message error send"),e;case"ROOM_SUCCESS_ADD":return console.log("room added"),e;case"ROOM_ERROR_ADD":return console.log("room added error"),e;case"ENTERED_PASSWORD":return console.log("password entered"),Object(D.a)({},e,{enteredPassword:t.password});default:return e}},F=a(69),L=Object(A.c)({auth:x,chat:U,firestore:F.firestoreReducer,firebase:j.firebaseReducer}),G=a(250),T=a(102),W=a.n(T);a(486),a(491);W.a.initializeApp({apiKey:"AIzaSyB8Trf_Fl56PMKAlCiKrsABxF2ouE48W8I",authDomain:"chat-app-9d72d.firebaseapp.com",databaseURL:"https://chat-app-9d72d.firebaseio.com",projectId:"chat-app-9d72d",storageBucket:"chat-app-9d72d.appspot.com",messagingSenderId:"882969008404"}),W.a.firestore().settings({timestampsInSnapshots:!0});var B=W.a,z=Object(A.e)(L,Object(A.d)(Object(A.a)(G.a.withExtraArgument({getFirebase:j.getFirebase,getFirestore:F.getFirestore})),Object(F.reduxFirestore)(B),Object(j.reactReduxFirebase)(B)));s.a.render(o.a.createElement(g.a,{store:z},o.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[251,2,1]]]);
//# sourceMappingURL=main.797e0a8e.chunk.js.map